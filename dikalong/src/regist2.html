<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注册表格</title>
    <link rel="stylesheet" href="projectcss/index.css">
    <link rel="stylesheet" href="projectcss/indexnav.css">
    <link rel="stylesheet" href="projectcss/indexlittlpic.css">
    <link rel="stylesheet" href="projectcss/indexselect.css">
    <link rel="stylesheet" href="projectcss/indexlit.css">
    <!-- <link rel="stylesheet" href="projectcss/regist1.css"> -->
    <link rel="stylesheet" href="projectcss/regist2.css">
    <style>
        *{
            margin: 0px;
            padding: 0px;
        }
        a{
            text-decoration: none;
        }
        img{
            vertical-align: top;
        }
        ul,li{
            list-style: none;
        }
    </style>
</head>
<body>
    <div id="indexbox">
        <div id="indexhidden">
            <div>
                <p><a href="">单笔订单满99包邮(健身大器材、乒乓球桌、自行车除外) ></a><span>×</span></p>
            </div>
        </div>
            <div id="indexheader">
                <div id="headline">
                    <div class="headlineclass1 turnleft"> 
                        <p class="headlinepdom"><span class="iconfont">&#xe680</span>分类</p>
                    </div>
                    <div class="headlineclass2">
                        <img src="imgs/indeximgs/a5ph2j8869851178619.png" alt="">
                    </div>
                    <div class="sousuobox">
                            <input id="sousuoboxinput" type="text" value="输入商品或商品号">
                            <p id="sousuoboxbtn" class="turnleft"><span class="iconfont">&#xe501</span></p>
                    </div>
                    <div class="selectbox">
                            <ul >
                                <li class="turnleft">
                                    <a href=""><div><span class="iconfont">&#xe70f</span>帮助</div></a>
                                </li>
                                <li class="turnleft">
                                    <a href=""><div><span class="iconfont">&#xe61c</span>门店</div></a>
                                </li>
                                <li class="turnleft">
                                    <a href=""><div><span class="iconfont">&#xe626</span>会员</div></a>
                                </li>
                                <li class="turnleft">
                                    <a href=""><div><span class="iconfont">&#xe507</span>购物车</div></a>
                                </li>
                            </ul>
                    </div>
                </div>
                <div id="selectshowbox">
                        <div class="selectdomclass">
                            <div>
                                <div class="selectpoint"></div>
                                <p>需要帮助 <span class="iconfont">&#xe7fc</span></p>
                            </div>
                            <ul>
                                <li><span class="iconfont">&#xe666</span><p>查看常见<a href="">问题</a></p></li>
                                <li><span class="iconfont">&#xe626</span><p>联系我们：4009-109-109<br>9:00~18:00/周一至周日<br>(包括公众假期)</p></li>
                                <li><span class="iconfont">&#xe6a0</span><p>给我们发送<a href="">邮件</a></p></li>
                                <li><span class="iconfont">&#xe61c</span><p>联系您的门店<a href="">寻找您附近的门店</a></p></li>
                            </ul>
                        </div>
                        <div class="selectdomclass">
                            <div>
                                <div class="selectpoint"></div>
                                <p>NEW!选择您的门店</p>
                            </div>
                            <ul>
                                <p class="textclass">选择您常去的门店，查看门店库存</p>
                                <p class="butnclass">选择您常去的门店</p>
                            </ul>
                        </div>
                        <div class="selectdomclass">
                            <div>
                                <div class="selectpoint"></div>
                                <p>欢迎回来</p>
                            </div>
                            <ul>
                                <li>账户</li>
                                <li>我的会员福利</li>
                                <li>购买记录</li>
                                <li>不是本人？</li>
                                <li><a href=""><span class="iconfont">&#xe666</span> 退出登录</a></li>
                            </ul>
                        </div>
                        <div class="selectdomclass">
                            <div>
                                <div class="selectpoint"></div>
                                <p>购物车</p>
                            </div>
                            <ul>
                                <li class="goodsstart">您的购物车是空的<br>请购物!</li>
                            </ul>
                        </div>
                </div>
            </div>
            <div id="navbox">
                <div id="navboxdivdom">
                    <div id="navpointbox">
                            <ul>
                                <li class="liturnablack"><a href="">所有运动</a></li>
                                <li class="liturnablack"><a href="">运动服饰</a></li>
                                <li class="liturnablack"><a href="">运动鞋袜</a></li>
                                <li class="liturnablack"><a href="">运动装备</a></li>
                                <hr>
                                <li class="liturnared"><a href="" >特惠专区</a></li>
                                <li class="liturnablack"><a href="">保养维修</a></li>
                                <li class="liturnablack"><a href="">个性定制</a></li>
                            </ul>
                    </div>
                    <div id="navshowbox">
                            <ul>
                                <!-- <li class="liclass1">
                                    <a href=""><img src="imgs/indeximgs/menuThumbnail_fitness.png" alt=""></a>
                                    <p>健身</p>
                                </li> -->
                                <!-- <li class="liclass2">
                                    <h3>户外运动</h3>
                                    <p><a href="">一日徒步装备</a></p>
                                    <p><a href="">一日徒步装备</a></p>
                                    <p><a href="">一日徒步装备</a></p>
                                    <p><a href="">一日徒步装备</a></p>
                                    <p><a href="">一日徒步装备</a></p>
                                    <p><a href="">一日徒步装备</a></p>
                                    <p><a href="">一日徒步装备</a></p>
                                </li> -->
                            </ul>
                    </div>
                </div>
            </div>
            <div id="middregisttbox">
                  <div class="dateshowbox">尊敬的新顾客欢迎您的光临，请完成下面的注册，我们将会给您带来更优质的服务</div>
                  <div class="registpage">
                       <p class="regreturnbtn"><span class="iconfont">&#xe502</span>返回</p>
                       <h2 class="regtitle">创建账户</h2>
                       <p class="registpromt">请根据步骤输入您的信息，来创建您的迪卡侬账户</p>
                       <div class="userdatepage">
                             <h3 class="userpromttitle">验证手机</h3>
                             <div class="userphoneset">
                                   <p class="registpromt">手机号码*</p>
                                   <div class="phonebox">
                                       <span><img src="imgs/indeximgs/flag.png" alt=""></span>
                                       <input type="text" id="userphone" value="国内手机号码" >
                                   </div>
                                   <div class="codebox">
                                         <input type="text" id="phonecode" value="请输入验证码">
                                         <span class="timebox">倒计时</span>
                                   </div>
                             </div>
                             <h3 class="userpromttitle">填写个人信息</h3>
                             <div class="usernameset">
                                    <p class="registpromt">性别：</p>
                                    <div class="usersexbox">
                                         <input type="radio" name="sex" value="男士">男士
                                         <input type="radio" name="sex" value="女士">女士
                                    </div>
                                    <div class="ussernamebox">
                                        <ul>
                                            <li>
                                                <p class="registpromt">姓*：</p>
                                                <input type="text" class="usernam">
                                            </li>
                                            <li>
                                                <p class="registpromt">名*：</p>
                                                <input type="text" class="usernam">
                                            </li>
                                        </ul>
                                    </div>
                            </div>
                             <h3 class="userpromttitle">设置密码</h3>
                             <div class="userpassset">
                                   <ul class="userpasssetbox">
                                       <li class="passinputbox">
                                           <p class="registpromt">密码*：</p>
                                           <p><input type="text" id="password"><img src="imgs/registimgs/shezhi-zhongzhimima-shuruxinmima-yanjing.png" alt=""></p>
                                       </li>
                                       <li class="passsetstd">
                                            <p class="registpromt">您的密码需要包含：</p>
                                            <p class="passwordstd"><span>√</span>至少8个字符</p>
                                            <p class="passwordstd"><span>√</span>至少1个数字</p>
                                            <p class="passwordstd"><span>√</span>至少一个英文字母</p>
                                       </li>
                                   </ul>
                                   <p class="autoreg">
                                        <input type="checkbox" name="autobtn" id="autobtn"> 自动登录
                                        <span class="iconfont">&#xe7fc</span>
                                   </p>
                            </div>
                             <h3 class="userpromttitle">推送优惠及活动</h3>
                             <div class="userpriceset">
                                <p class="registpromt">我希望收到迪卡侬及其激情品牌的最新资讯和活动*：</p>
                                <div class="userselectbox">
                                    <input type="radio" name="yesorno"" id="yes">是
                                    <input type="radio" name="yesorno" id="no">否
                               </div>
                            </div>
                       </div>
                       <div class="agreebox">
                            <p class="regreturnbtn"><span class="iconfont">&#xe502</span>返回</p>
                            <p id="regagreebtn">创建账户<span class="iconfont">&#xe509</span></p>
                            <p id="agreetext">我已阅读并同意<a href="">迪卡侬会员须知</a></p>
                            <p class="explaintitle">创建账户，必须填写</p>
                            <div class="explaindiscs">
                                  您的数据将被用于迪卡侬股份有限公司及其数据质量控制中心以及所有的迪卡侬电子商务公司。您的数据
                                  将被用于发送电子邮件、研究、统计数据以及市场营销行为，以便您能收到基于您运动喜好的而定制的个
                                  性化服务或产品，并能够对我们的产品进行监控。根据1976年1月6日的数据保护法修正条例，您有权修改、
                                  使用或拒绝您的数据通过电子邮件或邮寄的方式被发送？
                            </div>
                       </div>
                  </div>
                  <div class="registfoot">我们将会用我们最大的努力给您带来舒心的购物体验</div>
            </div>
    </div>
</body>
<script src="projectjs/jquery-3.2.1.min.js"></script>
<script src="projectjs/regAndlog.js"></script>
<script src="datejs/navdate.js"></script>
<script src="projectjs/setNav.js"></script>
<script src="projectjs/verifytool.js"></script>
<script>
        //头部naval的动态设置
     //jquery部分
     jQuery.noConflict();
     (function($){
        $("window").ready(function(){
            $("#navbox").css("width",$(document).width()+"px");
        });
        $(".headlineclass1:first-child").click(function(e){
           $("#navboxdivdom").css("left", "0px");
        });
        $("#navbox").mouseleave(function(){
           $("#navboxdivdom").css("left", -1*$("#navboxdivdom").width()+"px");
        });
        $("#navbox").mouseenter(function(){
           $("#navboxdivdom").css("left", "0px");
        });
        $("#regagreebtn").click(function(){
            if(isOkname*isOkPass==true){
                $.post(
                    "phps/addUser.php",
                    {
                        "username": username,
                        "userpass": password
                    },
                    function(date){
                        if(date == "success"){
                            alert("注册成功！去登录吧！亲")
                            location.href = "logon.html";
                        }else{
                            alert("注册失败！")
                        }
                    }
                )
            }
        })
     })(jQuery)
      //原生js
    //导航navboxdivdom
    let navbox = document.getElementById("navboxdivdom");
    let navdate = getNavDate();
    setNav(navbox,navdate); 
    //navclick
    //选项
    let selectdom = document.getElementsByClassName("selectbox")[0].children[0].children;
    let selectshowbox = document.getElementById("selectshowbox").children;
    for(let i=0;i<selectdom.length;i++){
        selectdom[i].onmouseenter = function(){
            selectdom[i].style.backgroundColor = "green";
            selectshowbox[i].style.display = "block";
        }
        selectdom[i].onmouseleave = function(){
            if(i<selectdom.length-1){
                selectdom[i].style.backgroundColor = "white";
            }else{
                selectdom[i].style.backgroundColor = "#ffea28";
            }
            selectshowbox[i].style.display = "none";
        }
    }

    //注册页面的效果
    //返回效果regreturnbtn
    document.getElementsByClassName("regreturnbtn")[0].onclick = function(){
        location.href = "regist1.html";
    }
    document.getElementsByClassName("regreturnbtn")[1].onclick = function(){
        location.href = "regist1.html";
    }
    //获取location传过来的数据
    let phonestr = location.href.split("?")[1].split("&");
    let phonecode = phonestr[0].split("=")[1];
    let phonenum = phonestr[1].split("=")[1];
    alert("手机验证码："+phonecode);
    let phoneinput = document.getElementById("userphone");
    phoneinput.value = phonenum + "";
    phoneinput.disabled = "disabled";
    let phonecodebox = document.getElementById("phonecode");
    phonecodebox.onclick = function(){
        phonecodebox.value = "";
        phonecodebox.style.opacity = 1;
    }
    let isOkCode = false;
    let isChangeCode = false;
    let timenum = 60;
    setInterval(() => {
        if(phonecodebox.value == phonecode){
            isOkCode = true;
        }
        if(isOkCode != true){
            if(timenum>=0){
                document.getElementsByClassName("timebox")[0].innerHTML = timenum + "秒";
                timenum--;
            }else{
                document.getElementsByClassName("timebox")[0].innerHTML = "重新获取验证码";
                document.getElementsByClassName("timebox")[0].onclick = function(){
                    phonecode = getCode(6);
                    alert(phonecode);
                    timenum = 60;
                    document.getElementsByClassName("timebox")[0].onclick = "";
                }
            }
        }else{
            document.getElementsByClassName("timebox")[0].innerHTML = "验证码OK!";
            phonecodebox.disabled = "disabled";
            phonecodebox.onclick = "";
        }
    }, 1000);

    //username  、password 、sex的获取
    let username = "";
    let isOkname = false;
    let password = "";
    let isOkPass = true;
    let usersex = "";
    let sex = document.getElementsByName("sex");
    for(let i=0;i<sex.length;i++){
        sex[i].onclick = function(){
            if(sex[i].checked){
                usersex = sex[i].value;
            }else{
                usersex = sex[Math.abs(i-1)].value;
            }
        }
    }
    let usernamebox = document.getElementsByClassName("usernam");
    for(let i=0;i<usernamebox.length;i++){
        usernamebox[i].oninput = function(){
            username = ""
            username =  usernamebox[0].value+usernamebox[1].value;
        }
    }
    setInterval(() => {
        if((usernamebox[0].value!="")&&(usernamebox[1].value!="")){
            isOkname = true;
        }else{
            isOkname = false;
        }
    }, 100);
    let passstd = document.getElementsByClassName("passwordstd")
    let passwordbox = document.getElementById("password");
    let passarr = [];
    passwordbox.onclick = function(){
        for(let i=0;i<passstd.length;i++){
            passstd[i].children[0].innerHTML = "√";
            passstd[i].children[0].style.color = "transparent";
        }
    }
    passwordbox.oninput = function(){
        password = passwordbox.value;
        if(password.length>=8){
            passstd[0].children[0].style.color = "green";
        }else{
            passstd[0].children[0].style.color = "transparent";
        }
        passarr = getnewpassword(password);
        if(passarr[0]){
            passstd[1].children[0].style.color = "green";
        }else{
            passstd[1].children[0].style.color = "transparent";
        }
        if(passarr[1]){
            passstd[2].children[0].style.color = "green";
        }else{
            passstd[2].children[0].style.color = "transparent";
        }
    }
    passwordbox.onblur = function(){
        isOkPass = true;
        for(let i=0;i<passstd.length;i++){
            if(passstd[i].children[0].style.color == "transparent"){
                passstd[i].children[0].innerHTML = "×";
                passstd[i].children[0].style.color = "red";
                isOkPass = false;
            }
        }
    }
</script>
</html>